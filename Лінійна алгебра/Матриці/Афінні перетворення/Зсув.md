---
tags:
  - матриця
  - афінні_перетворення
sourses:
---

**Зсув (Shear)** [[Матриця|матриці]] призводить до того, що кожна точка зміщується у фіксованому напрямку на величину, що пропорційна її відстані від прямої, паралельної цьому напрямку. Візуально зсув перетворює квадратне зображення на паралелограм. Зсув може відбуватися по вертикалі або горизонталі.
Матриця для обчислення горизонтального зсуву за допомогою скаляра $k$ є $\begin{pmatrix} 1 & k \\ 0 & 1 \end{pmatrix}$, тоді як матриця для вертикального зсуву — $\begin{pmatrix} 1 & 0 \\ k & 1 \end{pmatrix}$.
Оскільки зсув зазвичай задається кутом, [[Скаляр|скаляр]] $k$ обчислюється як тангенс кута зсуву. 
Розглянемо зсув квадрата з вершинами $P(−2,−2)$, $Q(2,−2)$, $R(2,2)$, $S(−2,2)$  та застосуємо перетворення по осі $X$.
$$
\begin{pmatrix} 1 & -\tan(32^{\circ}) \\ 0 & 1 \end{pmatrix} \times \begin{pmatrix} -2 & 2 & 2 & -2\\ -2 & -2 & 2 & 2 \end{pmatrix} = \begin{pmatrix} 1 & -0.62 \\ 0 & 1 \end{pmatrix} \times \begin{pmatrix} -2 & 2 & 2 & -2\\ -2 & -2 & 2 & 2 \end{pmatrix}=

$$
$$
= \begin{pmatrix} -0.76 & 3.24 & 0.76 & -3.24 \\ -2 & -2 & 2 & 2 \end{pmatrix}
$$
![[Зсув.png]]

Для того щоб виконати зсув по осі YY, необхідно застосувати наступне перетворення:
$$
\begin{pmatrix} 1 & 0 \\ -\tan(32^{\circ}) & 1 \end{pmatrix} \times \begin{pmatrix} -2 & 2 & 2 & -2\\ -2 & -2 & 2 & 2 \end{pmatrix} = \begin{pmatrix} 1 & 0 \\ -0.62 & 1 \end{pmatrix} \times \begin{pmatrix} -2 & 2 & 2 & -2\\ -2 & -2 & 2 & 2 \end{pmatrix}=

$$
$$
= \begin{pmatrix} -2 & 2 & 2 & -2 \\ -0.76 & -3.24 & 0.76 & 3.24 \end{pmatrix}
$$
![[Зсув по Y.png]]


Реалізація на Python:
```python
import cv2
import numpy as np
import matplotlib.pyplot as plt
import urllib

########### Генерація зображення  ####################
import cv2
import numpy as np
import matplotlib.pyplot as plt

# Розмір зображення
height = 100
width = 100

# Створення чорного зображення
image = np.zeros((height, width), dtype=np.uint8)

# Додавання цифри "1"
font = cv2.FONT_HERSHEY_SIMPLEX
cv2.putText(image, '1', (width // 4, height // 2), font, 2, 255, 2, cv2.LINE_AA)

# Відображення та збереження зображення
plt.imshow(image, cmap='gray')
plt.title('Згенероване зображення з цифрою "1"')
plt.show()
#############################################

# Задаємо матрицю трансформації для зсуву (зсув на 10 пікселів вправо та 50 пікселів вниз)
M = np.float32([[1, 0, 10], [0, 1, 50]])

# Виконуємо афінне перетворення
result_image = cv2.warpAffine(image, M, (image.shape[1], image.shape[0]))

# Показуємо оригінальне та змінене зображення
plt.subplot(121), plt.imshow(cv2.cvtColor(image, cv2.COLOR_BGR2RGB)), plt.title('Оригінал')
plt.subplot(122), plt.imshow(cv2.cvtColor(result_image, cv2.COLOR_BGR2RGB)), plt.title('Зсунуте')

plt.show()
```

**Результат виконання прикладу коду:**

![[результат зсуву.png]]
